<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="robots" content="index, follow"><title>ç”¨PHPè¿›è¡ŒHTTPè®¤è¯ â€¢ æ»¡æ±Ÿé£é›ª</title><meta name="description" content="ç”¨PHPè¿›è¡ŒHTTPè®¤è¯ - Heropoo"><link rel="icon" href="/favicon.svg"><link rel="stylesheet" href="https://unpkg.com/nanoreset@3.0.1/nanoreset.min.css"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="æ»¡æ±Ÿé£é›ª"></head><body><div class="wrap" id="barba-wrapper"><header><h1 class="branding"><a href="/" title="æ»¡æ±Ÿé£é›ª">æ»¡æ±Ÿé£é›ª</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link no-barba" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/about" target="_self">ABOUT</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="https://github.com/tiaanduplessis" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/atom.xml" target="_self">RSS</a></li></ul></header><div class="barba-container"><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ç”¨PHPè¿›è¡ŒHTTPè®¤è¯</h1><div class="post-info"><a></a>2017-08-21</div><div class="post-content"><p>PHPçš„HTTPè®¤è¯æœºåˆ¶ï¼Œå°±æ˜¯ç”¨<code>header()</code>å‡½æ•°æ¥å‘å®¢æˆ·ç«¯æµè§ˆå™¨å‘é€â€œAuthentication Requiredâ€ä¿¡æ¯ï¼Œä½¿å…¶å¼¹å‡ºä¸€ä¸ªç”¨æˆ·åï¼å¯†ç è¾“å…¥çª—å£ã€‚å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼ŒåŒ…å«æœ‰URLçš„PHPè„šæœ¬å°†ä¼šåŠ ä¸Šé¢„å®šä¹‰å˜é‡<code>PHP_AUTH_USER</code>ï¼Œ<code>PHP_AUTH_PW</code>å’Œ<code>AUTH_TYPE</code>è¢«å†æ¬¡è°ƒç”¨ï¼Œè¿™ä¸‰ä¸ªå˜é‡åˆ†åˆ«è¢«è®¾å®šä¸ºç”¨æˆ·åï¼Œå¯†ç å’Œè®¤è¯ç±»å‹ã€‚é¢„å®šä¹‰å˜é‡ä¿å­˜åœ¨ <code>$_SERVER</code> æˆ–è€… <code>$HTTP_SERVER_VARS</code> æ•°ç»„ä¸­ã€‚æ”¯æŒâ€œBasicâ€å’Œâ€œDigestâ€ï¼ˆè‡ª PHP 5.1.0 èµ·ï¼‰è®¤è¯æ–¹æ³•ã€‚è¿™æ˜¯phpå®˜ç½‘çš„è§£é‡Šã€‚<br>å¤§å®¶çœ‹ç¤ºä¾‹ä½“ä¼šã€‚ğŸ˜</p>
<p>å‚è€ƒè¿æ¥ï¼š<a href="http://php.net/manual/zh/features.http-auth.php" target="_blank" rel="noopener">http://php.net/manual/zh/features.http-auth.php</a></p>
<h3 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>($_SERVER[<span class="string">'PHP_AUTH_USER'</span>])) &#123;</span><br><span class="line">    header(<span class="string">'WWW-Authenticate: Basic realm="My Realm"'</span>);</span><br><span class="line">    header(<span class="string">'HTTP/1.0 401 Unauthorized'</span>);</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">'401 Unauthorized'</span>.<span class="string">'&lt;br&gt; &lt;button onclick="window.location.reload();"&gt;Login Again&lt;/button&gt;'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>($_SERVER[<span class="string">'PHP_AUTH_USER'</span>] !== <span class="string">'James Bond'</span> || $_SERVER[<span class="string">'PHP_AUTH_PW'</span>] !== <span class="string">'007'</span>)&#123;</span><br><span class="line">        header(<span class="string">'WWW-Authenticate: Basic realm="My Realm"'</span>);</span><br><span class="line">        header(<span class="string">'HTTP/1.0 401 Unauthorized'</span>);</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">'401 Unauthorized'</span>.<span class="string">'&lt;br&gt; &lt;button onclick="window.location.reload();"&gt;Login Again&lt;/button&gt;'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹é¢æ˜¯ä½ çš„ä¸šåŠ¡ä»£ç </span></span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/20170821120459.png" alt="example-pic"></p>
<p>è¿™æ ·å°±ä¼šå¼¹å‡ºä¸€ä¸ªç™»é™†æ¡†ï¼Œè¾“å…¥ç”¨æˆ·åï¼š<code>James Bond</code> å¯†ç ï¼š<code>007</code> ç™»é™†å§ï¼</p>
<p>æˆåŠŸäº†æ²¡ï¼Œå“ˆå“ˆï¼Œå¤§å®¶è§‰å¾—æ˜¯ä¸æ˜¯å¾ˆå¥½ç©~</p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2017/09/06/ä¹æœˆï¼ŒåŠ æ²¹/">prev</a><a class="next" href="/2017/08/16/ä¸€ä¸ªç®€å•çš„apiæˆæƒæµç¨‹/">next</a></div><div class="copyright"><p>&copy; 2016 - 2018 <a href="https://www.example.org/john-doe">John Doe</a><br>Powered by <a href="https://hexo.io/" rel="noreferrer" target="_blank">Hexo</a></p></div></footer></div></div><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
_gaq.push(['_trackPageview']);

(function () {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script><script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
    Barba.Pjax.start()
})</script></body></html>