<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon.ico?v=6.4.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon.ico?v=6.4.2">


  <link rel="mask-icon" href="/assets/images/favicon.png?v=6.4.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
<meta name="keywords" content="www.ioio.pw, ioio.pw, ioio, metmoon, metmoon.com,æ»¡æ±Ÿé£é›ª, heropoo, åšå®¢, ä¸ªäººåšå®¢, Heropooçš„ä¸ªäººåšå®¢, heropooåšå®¢">
<meta property="og:type" content="website">
<meta property="og:title" content="æ»¡æ±Ÿé£é›ª">
<meta property="og:url" content="https://metmoon.com/index.html">
<meta property="og:site_name" content="æ»¡æ±Ÿé£é›ª">
<meta property="og:description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ»¡æ±Ÿé£é›ª">
<meta name="twitter:description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">



  <link rel="alternate" href="/atom.xml" title="æ»¡æ±Ÿé£é›ª" type="application/atom+xml" />




  <link rel="canonical" href="https://metmoon.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>æ»¡æ±Ÿé£é›ª</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æ»¡æ±Ÿé£é›ª</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">æ—¶å…‰æ¼«æ¼«ï¼Œä½•å¦¨æ‰¬çœ‰æ·¡ç¬‘ï¼Œå¿ƒå¢ƒä»å®¹ï¼Ÿ</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />é¦–é¡µ</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />å½’æ¡£</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/11/18/mysql-json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/mysql-json/" itemprop="url">
                  MySQL5.7çš„JSONåŸºæœ¬æ“ä½œ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-11-18 18:11:06 / ä¿®æ”¹æ—¶é—´ï¼š22:02:31" itemprop="dateCreated datePublished" datetime="2018-11-18T18:11:06+08:00">2018-11-18</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>MySQLä»5.7ç‰ˆæœ¬å¼€å§‹å°±æ”¯æŒJSONæ ¼å¼çš„æ•°æ®ï¼Œæ“ä½œç”¨èµ·æ¥æŒºæ–¹ä¾¿çš„ã€‚</p>
<h3 id="å»ºè¡¨"><a href="#å»ºè¡¨" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h3><p>åœ¨æ–°å»ºè¡¨æ—¶å­—æ®µç±»å‹å¯ä»¥ç›´æ¥è®¾ç½®ä¸ºjsonç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€å¼ è¡¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `test_user`(`id` INT PRIMARY KEY AUTO_INCREMENT, `name` VARCHAR(50) NOT NULL, `info` JSON);</span><br></pre></td></tr></table></figure></p>
<p>jsonç±»å‹å­—æ®µå¯ä»¥ä¸ºNULL</p>
<h3 id="æ’å…¥æ•°æ®ï¼š"><a href="#æ’å…¥æ•°æ®ï¼š" class="headerlink" title="æ’å…¥æ•°æ®ï¼š"></a>æ’å…¥æ•°æ®ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO test_user(`name`, `info`) VALUES(&apos;xiaoming&apos;,&apos;&#123;&quot;sex&quot;: 1, &quot;age&quot;: 18, &quot;nick_name&quot;: &quot;å°èŒ&quot;&#125;&apos;);</span><br></pre></td></tr></table></figure>
<p>jsonç±»å‹çš„å­—æ®µå¿…é¡»æ—¶ä¸€ä¸ªæœ‰æ•ˆçš„jsonå­—ç¬¦ä¸²</p>
<p>å¯ä»¥ä½¿ç”¨JSON_OBJECT()å‡½æ•°æ„é€ jsonå¯¹è±¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO test_user(`name`, `info`) VALUES(&apos;xiaohua&apos;, JSON_OBJECT(&quot;sex&quot;, 0, &quot;age&quot;, 17));</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨JSON_ARRAY()å‡½æ•°æ„é€ jsonæ•°ç»„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO test_user(`name`, `info`) VALUES(&apos;xiaozhang&apos;, JSON_OBJECT(&quot;sex&quot;, 1, &quot;age&quot;, 19, &quot;tag&quot;, JSON_ARRAY(3,5,90)));</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨æŸ¥çœ‹<code>test_user</code>è¡¨ä¸­çš„æ•°æ®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from test_user;</span><br><span class="line">+----+-----------+--------------------------------------------+</span><br><span class="line">| id | name      | info                                       |</span><br><span class="line">+----+-----------+--------------------------------------------+</span><br><span class="line">|  1 | xiaoming  | &#123;&quot;age&quot;: 18, &quot;sex&quot;: 1, &quot;nick_name&quot;: &quot;å°èŒ&quot;&#125; |</span><br><span class="line">|  2 | xiaohua   | &#123;&quot;age&quot;: 17, &quot;sex&quot;: 0&#125;                      |</span><br><span class="line">|  3 | xiaozhang | &#123;&quot;age&quot;: 19, &quot;sex&quot;: 1, &quot;tag&quot;: [3, 5, 90]&#125;   |</span><br><span class="line">+----+-----------+--------------------------------------------+</span><br><span class="line">3 rows in set (0.04 sec)</span><br></pre></td></tr></table></figure></p>
<h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><p>è¡¨è¾¾å¼ï¼š å¯¹è±¡ä¸º<code>jsonåˆ—-&gt;&#39;$.é”®&#39;</code>, æ•°ç»„ä¸º<code>jsonåˆ—-&gt;&#39;$.é”®[index]&#39;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name, info-&gt;&apos;$.nick_name&apos;, info-&gt;&apos;$.sex&apos;, info-&gt;&apos;$.tag[0]&apos; from test_user;</span><br><span class="line">+-----------+---------------------+---------------+------------------+</span><br><span class="line">| name      | info-&gt;&apos;$.nick_name&apos; | info-&gt;&apos;$.sex&apos; | info-&gt;&apos;$.tag[0]&apos; |</span><br><span class="line">+-----------+---------------------+---------------+------------------+</span><br><span class="line">| xiaoming  | &quot;å°èŒ&quot;              | 1             | NULL             |</span><br><span class="line">| xiaohua   | NULL                | 0             | NULL             |</span><br><span class="line">| xiaozhang | NULL                | 1             | 3                |</span><br><span class="line">+-----------+---------------------+---------------+------------------+</span><br><span class="line">3 rows in set (0.04 sec)</span><br></pre></td></tr></table></figure></p>
<p>ç­‰ä»·äºï¼šå¯¹è±¡ä¸º<code>JSON_EXTRACT(jsonåˆ— , &#39;$.é”®&#39;)</code>ï¼Œæ•°ç»„ä¸º<code>JSON_EXTRACT(jsonåˆ— , &#39;$.é”®[index]&#39;)</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name, JSON_EXTRACT(info, &apos;$.nick_name&apos;), JSON_EXTRACT(info, &apos;$.sex&apos;), JSON_EXTRACT(info, &apos;$.tag[0]&apos;)  from test_user;</span><br><span class="line">+-----------+-----------------------------------+-----------------------------+--------------------------------+</span><br><span class="line">| name      | JSON_EXTRACT(info, &apos;$.nick_name&apos;) | JSON_EXTRACT(info, &apos;$.sex&apos;) | JSON_EXTRACT(info, &apos;$.tag[0]&apos;) |</span><br><span class="line">+-----------+-----------------------------------+-----------------------------+--------------------------------+</span><br><span class="line">| xiaoming  | &quot;å°èŒ&quot;                            | 1                           | NULL                           |</span><br><span class="line">| xiaohua   | NULL                              | 0                           | NULL                           |</span><br><span class="line">| xiaozhang | NULL                              | 1                           | 3                              |</span><br><span class="line">+-----------+-----------------------------------+-----------------------------+--------------------------------+</span><br><span class="line">3 rows in set (0.04 sec)</span><br></pre></td></tr></table></figure></p>
<p>ä¸è¿‡çœ‹åˆ°ä¸Šé¢<code>&quot;å°èŒ&quot;</code>æ˜¯å¸¦åŒå¼•å·çš„ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¯ä»¥ç”¨<code>JSON_UNQUOTE</code>å‡½æ•°å°†åŒå¼•å·å»æ‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name, JSON_UNQUOTE(info-&gt;&apos;$.nick_name&apos;) from test_user where name=&apos;xiaoming&apos;;</span><br><span class="line">+----------+-----------------------------------+</span><br><span class="line">| name     | JSON_UNQUOTE(info-&gt;&apos;$.nick_name&apos;) |</span><br><span class="line">+----------+-----------------------------------+</span><br><span class="line">| xiaoming | å°èŒ                              |</span><br><span class="line">+----------+-----------------------------------+</span><br><span class="line">1 row in set (0.05 sec)</span><br></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ“ä½œç¬¦<code>-&gt;&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name, info-&gt;&gt;&apos;$.nick_name&apos; from test_user where name=&apos;xiaoming&apos;;</span><br><span class="line">+----------+----------------------+</span><br><span class="line">| name     | info-&gt;&gt;&apos;$.nick_name&apos; |</span><br><span class="line">+----------+----------------------+</span><br><span class="line">| xiaoming | å°èŒ                 |</span><br><span class="line">+----------+----------------------+</span><br><span class="line">1 row in set (0.06 sec)</span><br></pre></td></tr></table></figure></p>
<p>å½“ç„¶å±æ€§ä¹Ÿå¯ä»¥ä½œä¸ºæŸ¥è¯¢æ¡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name, info-&gt;&gt;&apos;$.nick_name&apos; from test_user where info-&gt;&apos;$.nick_name&apos;=&apos;å°èŒ&apos;;</span><br><span class="line">+----------+----------------------+</span><br><span class="line">| name     | info-&gt;&gt;&apos;$.nick_name&apos; |</span><br><span class="line">+----------+----------------------+</span><br><span class="line">| xiaoming | å°èŒ                 |</span><br><span class="line">+----------+----------------------+</span><br><span class="line">1 row in set (0.05 sec)</span><br></pre></td></tr></table></figure></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡è™šæ‹Ÿåˆ—å¯¹JSONç±»å‹çš„æŒ‡å®šå±æ€§è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ã€‚</p>
<p>åˆ›å»ºè™šæ‹Ÿåˆ—:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE `test_user` ADD `nick_name` VARCHAR(50) GENERATED ALWAYS AS (info-&gt;&gt;&apos;$.nick_name&apos;) VIRTUAL;</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„ç”¨æ“ä½œç¬¦<code>-&gt;&gt;</code></p>
<p>ä½¿ç”¨æ—¶å’Œæ™®é€šç±»å‹çš„åˆ—æŸ¥è¯¢æ˜¯ä¸€æ ·:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name,nick_name from test_user where nick_name=&apos;å°èŒ&apos;;</span><br><span class="line">+----------+-----------+</span><br><span class="line">| name     | nick_name |</span><br><span class="line">+----------+-----------+</span><br><span class="line">| xiaoming | å°èŒ      |</span><br><span class="line">+----------+-----------+</span><br><span class="line">1 row in set (0.05 sec)</span><br></pre></td></tr></table></figure></p>
<h3 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h3><p>ä½¿ç”¨<code>JSON_INSERT()</code>æ’å…¥æ–°å€¼ï¼Œä½†ä¸ä¼šè¦†ç›–å·²ç»å­˜åœ¨çš„å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; UPDATE test_user SET info = JSON_INSERT(info, &apos;$.sex&apos;, 1, &apos;$.nick_name&apos;, &apos;å°èŠ±&apos;) where id=2;</span><br></pre></td></tr></table></figure></p>
<p>çœ‹ä¸‹ç»“æœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from test_user where id=2;</span><br><span class="line">+----+---------+--------------------------------------------+-----------+</span><br><span class="line">| id | name    | info                                       | nick_name |</span><br><span class="line">+----+---------+--------------------------------------------+-----------+</span><br><span class="line">|  2 | xiaohua | &#123;&quot;age&quot;: 17, &quot;sex&quot;: 0, &quot;nick_name&quot;: &quot;å°èŠ±&quot;&#125; | å°èŠ±      |</span><br><span class="line">+----+---------+--------------------------------------------+-----------+</span><br><span class="line">1 row in set (0.06 sec)</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨<code>JSON_SET()</code>æ’å…¥æ–°å€¼ï¼Œå¹¶è¦†ç›–å·²ç»å­˜åœ¨çš„å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; UPDATE test_user SET info = JSON_INSERT(info, &apos;$.sex&apos;, 0, &apos;$.nick_name&apos;, &apos;å°å¼ &apos;) where id=3;</span><br></pre></td></tr></table></figure></p>
<p>çœ‹ä¸‹ç»“æœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from test_user where id=3;</span><br><span class="line">+----+-----------+---------------------------------------------------------------+-----------+</span><br><span class="line">| id | name      | info                                                          | nick_name |</span><br><span class="line">+----+-----------+---------------------------------------------------------------+-----------+</span><br><span class="line">|  3 | xiaozhang | &#123;&quot;age&quot;: 19, &quot;sex&quot;: 1, &quot;tag&quot;: [3, 5, 90], &quot;nick_name&quot;: &quot;å°å¼ &quot;&#125; | å°å¼       |</span><br><span class="line">+----+-----------+---------------------------------------------------------------+-----------+</span><br><span class="line">1 row in set (0.06 sec)</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨<code>JSON_REPLACE()</code>åªæ›¿æ¢å­˜åœ¨çš„å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; UPDATE test_user SET info = JSON_REPLACE(info, &apos;$.sex&apos;, 1, &apos;$.tag&apos;, &apos;[1,2,3]&apos;) where id=2;</span><br></pre></td></tr></table></figure></p>
<p>çœ‹ä¸‹ç»“æœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from test_user where id=2;</span><br><span class="line">+----+---------+--------------------------------------------+-----------+</span><br><span class="line">| id | name    | info                                       | nick_name |</span><br><span class="line">+----+---------+--------------------------------------------+-----------+</span><br><span class="line">|  2 | xiaohua | &#123;&quot;age&quot;: 17, &quot;sex&quot;: 1, &quot;nick_name&quot;: &quot;å°èŠ±&quot;&#125; | å°èŠ±      |</span><br><span class="line">+----+---------+--------------------------------------------+-----------+</span><br><span class="line">1 row in set (0.06 sec)</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°tagæ²¡æœ‰æ›´æ–°è¿›å»</p>
<h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><p>ä½¿ç”¨<code>JSON_REMOVE()</code>åˆ é™¤JSONå…ƒç´ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; UPDATE test_user SET info = JSON_REMOVE(info, &apos;$.sex&apos;, &apos;$.tag&apos;) where id=1;</span><br></pre></td></tr></table></figure></p>
<p>çœ‹ä¸‹ç»“æœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from test_user where id=1;</span><br><span class="line">+----+----------+----------------------------------+-----------+</span><br><span class="line">| id | name     | info                             | nick_name |</span><br><span class="line">+----+----------+----------------------------------+-----------+</span><br><span class="line">|  1 | xiaoming | &#123;&quot;age&quot;: 18, &quot;nick_name&quot;: &quot;å°èŒ&quot;&#125; | å°èŒ      |</span><br><span class="line">+----+----------+----------------------------------+-----------+</span><br><span class="line">1 row in set (0.05 sec)</span><br></pre></td></tr></table></figure></p>
<p>æœ€åä»MySQLçš„å®˜æ–¹ç½‘ç«™æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼š<a href="http://dev.mysql.com/doc/refman/5.7/en/json.html" target="_blank" rel="noopener">http://dev.mysql.com/doc/refman/5.7/en/json.html</a></p>
<p>ğŸ˜</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/11/02/jupyter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/02/jupyter/" itemprop="url">
                  å®‰è£…Jupyterç¬”è®°æœ¬
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-11-02 19:07:09" itemprop="dateCreated datePublished" datetime="2018-11-02T19:07:09+08:00">2018-11-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-11-18 17:41:26" itemprop="dateModified" datetime="2018-11-18T17:41:26+08:00">2018-11-18</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å®‰è£…Jupyterç¬”è®°æœ¬ï¼Œåšä¸ªç¬”è®°</p>
<p>é€šè¿‡pipå®‰è£…<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install jupyter</span><br></pre></td></tr></table></figure></p>
<p>åˆ›å»ºJupyteré»˜è®¤é…ç½®æ–‡ä»¶<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure></p>
<p>ç”ŸæˆSHA1åŠ å¯†çš„å¯†é’¥ï¼Œå¦‚â€™sha1:XXXXXXâ€™<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ipython</span><br><span class="line">--------------------------------------</span><br><span class="line">from notebook.auth import passwd</span><br><span class="line">passwd()</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim .jupyter/jupyter_notebook_config.py</span><br><span class="line">--------------------------------------</span><br><span class="line">c.NotebookApp.password = u<span class="string">'sha1:XXXXXX'</span></span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œjupyter<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure></p>
<p>å¯é€‰çš„è¿è¡Œå‚æ•°<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --ip=0.0.0.0 --no-browser --allow-root</span><br></pre></td></tr></table></figure></p>
<p>æ‰“å¼€æµè§ˆå™¨è¾“å…¥ <a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/10/27/fix-gitment/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/27/fix-gitment/" itemprop="url">
                  ä¿®å¤gitmentè¯„è®º
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-10-27 16:17:34 / ä¿®æ”¹æ—¶é—´ï¼š16:41:36" itemprop="dateCreated datePublished" datetime="2018-10-27T16:17:34+08:00">2018-10-27</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/github-issue/" itemprop="url" rel="index"><span itemprop="name">github-issue</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ€è¿‘å‡ ä¸ªæœˆåšå®¢å¤–æŒ‚çš„gitmentè¯„è®ºè€æ˜¯æŒ‚ï¼Œä¹Ÿä¸€ç›´æ²¡æ—¶é—´ä¿®å¤ã€‚è¿™å‡ å¤©æƒ³åŠæ³•ä¿®å¥½äº†ã€‚å°±è¯´è¯´ä¿®å¤çš„è¿‡ç¨‹å§ã€‚</p>
<p>ä»æˆ‘å¼€å§‹ç”¨gitmentçš„è¯„è®ºç³»ç»Ÿï¼Œæ€»å…±å‡ºç°è¿‡ä¸¤æ¬¡é—®é¢˜ï¼š</p>
<h2 id="1-github-issue-labelçš„å­—ç¬¦é•¿åº¦é™åˆ¶"><a href="#1-github-issue-labelçš„å­—ç¬¦é•¿åº¦é™åˆ¶" class="headerlink" title="1. github-issue labelçš„å­—ç¬¦é•¿åº¦é™åˆ¶"></a>1. github-issue labelçš„å­—ç¬¦é•¿åº¦é™åˆ¶</h2><p>è¿™æ¬¡å¯¼è‡´åŸæœ¬é»˜è®¤ä½¿ç”¨ç½‘é¡µurlåœ°å€åšlabelåˆå§‹åŒ–è¯„è®ºçš„æ–¹å¼æ— æ³•ä½¿ç”¨ï¼Œurlå¤ªé•¿äº†è¶…è¿‡äº†50ä¸ªå­—ç¬¦ã€‚è€Œä¹‹å‰å·²ç»åˆå§‹åŒ–å¥½çš„è¯„è®ºï¼ˆissueï¼‰ä¸æ”¶å½±å“ã€‚æ‰€ä»¥åæ¥æˆ‘æƒ³äº†ä¸ªåŠæ³•æ¥æ”¹ï¼Œå°±æ˜¯ç”¨æ—¶é—´æ¥åˆå§‹åŒ–ï¼Œå¹¶ä¸”å¯¹äºä¸ºäº†å…¼å®¹ä¹‹å‰çš„è¯„è®ºï¼ŒåŠ äº†æ—¶é—´åˆ¤æ–­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> page_date = <span class="string">'&#123;&#123; page.date &#125;&#125;'</span>;</span><br><span class="line"><span class="keyword">var</span> id = <span class="built_in">window</span>.location.href;</span><br><span class="line"><span class="keyword">if</span>(page_date &gt; <span class="string">'2018-04-31 00:00:00 +0000'</span>)&#123;</span><br><span class="line">    id = page_date;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> gitment = <span class="keyword">new</span> Gitment(&#123;</span><br><span class="line">    id: id, <span class="comment">// å¯é€‰ã€‚é»˜è®¤ä¸º location.href</span></span><br><span class="line">    owner: <span class="string">'heropoo'</span>,</span><br><span class="line">    repo: <span class="string">'heropoo.github.io'</span>,</span><br><span class="line">    oauth: &#123;</span><br><span class="line">        client_id: <span class="string">'cccc'</span>,</span><br><span class="line">        client_secret: <span class="string">'xxxx'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">gitment.render(<span class="string">'container'</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="2-gitment-ä½œè€…æä¾›çš„oauthæˆæƒæœåŠ¡ä¸å¯ç”¨"><a href="#2-gitment-ä½œè€…æä¾›çš„oauthæˆæƒæœåŠ¡ä¸å¯ç”¨" class="headerlink" title="2. gitment ä½œè€…æä¾›çš„oauthæˆæƒæœåŠ¡ä¸å¯ç”¨"></a>2. gitment ä½œè€…æä¾›çš„oauthæˆæƒæœåŠ¡ä¸å¯ç”¨</h2><p>è¿™æ¬¡å¥½åƒæŒ‚äº†ä½¿ç”¨ä½œè€…æä¾›çš„jsçš„åšå®¢å…¨æŒ‚äº†ğŸ˜‚ã€‚ è§£å†³åŠæ³•å°±æ˜¯è‡ªå·±æ­å»ºæˆ–è€…ä½¿ç”¨åˆ«äººæ­å»ºçš„oauthæˆæƒæœåŠ¡äº†ã€‚ å¥½å§ï¼Œæ¢ä¸ªæˆæƒæœåŠ¡æ€»ç®—å¥½äº†ã€‚</p>
<h2 id="3-å‡çº§https"><a href="#3-å‡çº§https" class="headerlink" title="3. å‡çº§https"></a>3. å‡çº§https</h2><p>ç°åœ¨github-pageæä¾›å¼ºåˆ¶httpsã€‚å‡çº§ä¹‹åå‘ç°ä¹‹å‰å…¼å®¹çš„ä½¿ç”¨é¡µé¢urlåˆå§‹åŒ–çš„è¯„è®ºåˆä¸èƒ½ç”¨äº†ã€‚ ã„Ÿ( â–”, â–” )ã„<br>ä½†æ˜¯è¿˜å¾—ä¿®å˜›ã€‚åæ¥ä»”ç»†è§‚å¯Ÿäº†ä¸‹ï¼ŒåŸæ¥ä½œè€…æ˜¯ä½¿ç”¨<code>gitment</code>å’Œé¡µé¢jsä¸­è·å–çš„idæ¥åŒ¹é…å‡ºä¸€ä¸ªissueçš„ã€‚æ‰€ä»¥åªè¦å»githubä¿®æ”¹issue labelå°±å¯ä»¥äº†ã€‚æŠŠåŸæ¥å¾ˆé•¿çš„url labelæ”¹æˆç°åœ¨çš„çŸ­çš„ï¼Œæ¯”å¦‚åƒæˆ‘ä¸€æ ·ç”¨æ—¶é—´ã€‚ç„¶åé¡µé¢ä¸Šçš„å…¼å®¹çš„jsä¹Ÿå»æ‰å°±æå®šäº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> page_date = <span class="string">'&#123;&#123; page.date &#125;&#125;'</span>;</span><br><span class="line"><span class="comment">//var id = window.location.href;</span></span><br><span class="line"><span class="comment">//if(page_date &gt; '2018-04-31 00:00:00 +0000')&#123;</span></span><br><span class="line"><span class="keyword">var</span> id = page_date;</span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="keyword">var</span> gitment = <span class="keyword">new</span> Gitment(&#123;</span><br><span class="line">    id: id, <span class="comment">// å¯é€‰ã€‚é»˜è®¤ä¸º location.href</span></span><br><span class="line">    owner: <span class="string">'heropoo'</span>,</span><br><span class="line">    repo: <span class="string">'heropoo.github.io'</span>,</span><br><span class="line">    oauth: &#123;</span><br><span class="line">        client_id: <span class="string">'cccc'</span>,</span><br><span class="line">        client_secret: <span class="string">'xxxx'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">gitment.render(<span class="string">'container'</span>);</span><br></pre></td></tr></table></figure></p>
<p>å¥½äº†ï¼Œæå®Œæ”¶å·¥ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/10/16/yii2-activerecord-to-json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/16/yii2-activerecord-to-json/" itemprop="url">
                  å…³äºYii2æŸ¥è¯¢æ•°æ®å¯¹è±¡ActiveRecordçš„jsonåºåˆ—åŒ–é—®é¢˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-10-16 17:53:45 / ä¿®æ”¹æ—¶é—´ï¼š22:38:06" itemprop="dateCreated datePublished" datetime="2018-10-16T17:53:45+08:00">2018-10-16</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä»Šå¤©åœ¨ä½¿ç”¨<code>json_encode</code>å‡½æ•°åºåˆ—åŒ–Yii2æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®æ¨¡å‹å¯¹è±¡ï¼ˆé€šå¸¸ç»§æ‰¿<code>ActiveRecord</code>ç±»ï¼‰æ—¶ï¼Œå‘ç°è¿”å›ç»“æœæ˜¯<code>{}</code>,è€Œä¸æ˜¯é¢„æœŸçš„æ•°æ®åº“å­—æ®µé”®å€¼å¯¹è¿™ç§å½¢å¼ï¼š<code>{&quot;name&quot;ï¼š &quot;xxx&quot;, &quot;sex&quot;: 1}</code></p>
<p>åæ¥èµ¶æ—¶é—´å°±ç›´æ¥åœ¨æ‰‹åŠ¨å¤„ç†äº†ä¸‹ï¼Œæ”¹åŠ¨äº†ä¸‹æ¨¡å‹å¯¹è±¡è®©å®ƒæ¥å…¥<code>JsonSerializable</code>æ¥å£ï¼Œå¹¶å®ç°å…¶æ¥å£æ–¹æ³•ï¼Œç±»ä¼¼è¿™æ ·ï¼›<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">ActiveRecord</span> <span class="keyword">implements</span> \<span class="title">JsonSerializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//... å…¶ä»–ä»£ç </span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">jsonSerialize</span> <span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>-&gt;toArray();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå®Œç¾çš„è§£å†³äº†ã€‚ </p>
<p>ä½†æ˜¯åæ¥ä»£ç å†™å®Œäº†ï¼Œè§‰å¾—è¿™ä¸ªæ¡†æ¶åº”è¯¥æä¾›äº†è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•äº†å§ã€‚ç„¶åæ‰¾äº†æ‰¾ï¼Œæœç„¶æœ‰çš„ï¼š <code>\yii\helpers\BaseJson::encode($user)</code>ã€‚ç„¶åç¿»äº†ç¿»æºä»£ç ï¼Œéƒ¨åˆ†ä»£ç æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//from \yii\helpers\BaseJson::processData</span></span><br><span class="line"><span class="keyword">if</span> (is_object($data)) &#123;</span><br><span class="line">    <span class="keyword">if</span> ($data <span class="keyword">instanceof</span> JsExpression) &#123;</span><br><span class="line">        $token = <span class="string">"!&#123;[$expPrefix="</span> . count($expressions) . <span class="string">']&#125;!'</span>;</span><br><span class="line">        $expressions[<span class="string">'"'</span> . $token . <span class="string">'"'</span>] = $data-&gt;expression;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $token;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> ($data <span class="keyword">instanceof</span> \JsonSerializable) &#123;</span><br><span class="line">        $data = $data-&gt;jsonSerialize();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> ($data <span class="keyword">instanceof</span> Arrayable) &#123; <span class="comment">// &lt;---here</span></span><br><span class="line">        $data = $data-&gt;toArray();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> ($data <span class="keyword">instanceof</span> \SimpleXMLElement) &#123;</span><br><span class="line">        $data = (<span class="keyword">array</span>) $data;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $result = [];</span><br><span class="line">        <span class="keyword">foreach</span> ($data <span class="keyword">as</span> $name =&gt; $value) &#123;</span><br><span class="line">            $result[$name] = $value;</span><br><span class="line">        &#125;</span><br><span class="line">        $data = $result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ($data === []) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> \stdClass();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½œè€…åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™åšäº†åˆ¤æ–­ï¼Œ<code>ActiveRecord</code>ç±»æ¥äº†<code>Arrayable</code>æ¥å£ï¼Œç„¶åä½œè€…ä¹Ÿæ˜¯ä½¿ç”¨<code>toArray()</code>æ–¹æ³•ã€‚ç„¶åæˆ‘è§‰å¾—æ”¾å¿ƒäº†ã€‚æˆ‘çš„æ”¹é€ ä¹Ÿæ²¡æœ‰é”™ã€‚å½“ç„¶äº†ä½¿ç”¨æ¡†æ¶æä¾›çš„æ–¹æ³•æ›´ç®€å•ç‚¹ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/09/18/ç›—å°†è¡Œ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/18/ç›—å°†è¡Œ/" itemprop="url">
                  ç›—å°†è¡Œ(è½¬)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-09-18 18:10:52 / ä¿®æ”¹æ—¶é—´ï¼š18:16:06" itemprop="dateCreated datePublished" datetime="2018-09-18T18:10:52+08:00">2018-09-18</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å¬é£é›¨/" itemprop="url" rel="index"><span itemprop="name">å¬é£é›¨</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>é‡å²è®°è½½:å®‹å¾½å®—äºŒåå¹´ï¼ˆ1120å¹´ï¼‰ï¼Œæœé‡åŠ¨è¡ï¼Œè¾¹ç–†ä¸ç¨³ã€‚æ—¶æœ‰ç›—è€…ï¼Œå–å®˜æµæ°‘ï¼Œå‡¡äº¬ä¸­è´ªå®˜ï¼Œæ— ä¸€å¹¸å…ï¼Œæ°‘å’¸æ•¬ä¹‹ï¼Œå´æ— äººçŸ¥å…¶çœŸé¢ç›®ã€‚ç„¶è‡ªå¾½å®—äºŒåä¸‰å¹´ï¼Œæ­¤ç›—æœªæ›¾å‡ºç°ï¼Œè‡³å¾½å®—äºŒåå…­å¹´ï¼Œæ­¤ç›—å…¥å—äº¬ç‹åºœï¼Œæœªå–å®ƒç‰©ï¼Œä»…ç›—èµ°ä¸€ç‰ç°ªï¼Œè‡ªæ­¤åŒ¿è¿¹â€¦â€¦</p>
<p>é‡å²è®°è½½:å®‹é’¦å®—å…ƒå¹´ï¼ˆ1126å¹´ï¼‰ï¼Œé‡‘å†›å°†é¢†å®Œé¢œå…‹å›¾ç‡å†›æ”»é™·å®‹éƒ½æ±´æ¢ï¼Œé’¦å®—è¢«ä¿˜ï¼Œæ°‘ä¸èŠç”Ÿã€‚1127å¹´ï¼Œå®‹é«˜å®—èµµæ„å»ºç«‹å—å®‹æ”¿æƒï¼Œæ—¶å®‹å†›ä¸é‡‘å†›äº¤æˆ˜ï¼Œä¸€å°å’ä¸€ç®­å°„æ€å®Œé¢œå…‹å›¾ï¼Œè€Œåå±¡ç«‹æˆ˜åŠŸï¼Œå®˜è‡³æŠ¤å›½å°†å†›ï¼Œç­å¸ˆå›æœåï¼Œå®‹ä¸»æ¬²å¯¹å…¶å¤§è¡Œå°èµï¼Œç„¶å…¶è‡ªè¾å®˜èŒï¼Œè‡ªæ­¤åŒ¿è¿¹â€¦â€¦</p>
<p>å…¬å…ƒ1137å¹´ï¼Œä¸€ç¬‘è½©å†…ï¼Œåº§æ— è™šå¸­ï¼Œå¸­å‰åä¸€ä¸­å¹´ç”·å­ï¼Œç›¸è²Œéå‡¡ï¼Œæ–‡å¢¨ä¸­é¢‡æœ‰æ­¦å°†é£é‡‡ï¼Œæœ‰å¬è€…å¸­ä¸‹æš—å¹:æ­¤ç­‰äººé—´ç¢ç‰éƒï¼Œå¤©åº”ä¹ä¸ç‚¹é…¥å¨˜ï¼Œå¥ˆä½•å¤©å…¬ä¸ä½œç¾å•Šâ€¦â€¦ï¼Œåªè§ç”·å­æ‰‹æ‰§é†’æœ¨ä¸€æ•²ï¼Œâ€œä»Šæ—¥æˆ‘ç»™è¯¸ä½è®²è®²é‚£ä½æ¶ˆå¤±å¤§ç›—çš„æ•…äº‹ã€‚è¯¸ä½éƒ½çŸ¥é“è¿™å¤§ç›—åœ¨åå¤šå¹´å‰åŠ«å¯Œæµè´«ï¼Œç™¾å§“è§†ä¹‹ä¸ºç¥æ˜ï¼Œè¯¸ä½å¯çŸ¥ä¸ºä½•è¿™å¤§ç›—æ¶ˆå¤±å‡ å¹´åï¼Œåˆäºå—äº¬ç‹åºœç›—å–ä¸€æ”¯ç‰ç°ªæ­¤åä¾¿å†æ— æ¶ˆæ¯â€¦â€¦â€</p>
<p>â€œæ²¡é”™ï¼Œæˆ‘å°±æ˜¯è¯´ä¹¦äººï¼Œä¹Ÿæ˜¯å¤§ç›—ï¼Œäº¦æ˜¯æŠ¤å›½å°†å†›ï¼ŒäºŒåå²ä¹‹å‰ï¼Œæˆ‘ä»å¸ˆå‚…é‚£é‡Œä¹ å¾—æ­¦è‰ºï¼Œå­¦æˆåå› å–œè‡ªåœ¨ç”Ÿæ´»ï¼Œå´çœ‹ä¸æƒ¯è´ªå®˜æ±¡åï¼Œç”±æ­¤å¼€å§‹äº†åŠ«è´ªæµè´«çš„ç”Ÿæ´»ï¼Œæœ¬ä»¥ä¸ºè‡ªå·±ä¸€ç”Ÿéƒ½ä¼šè¿™æ ·ä¸€ä¸ªäººæ¸¡è¿‡ï¼Œæ¸…é£æ˜æœˆã€è½æ—¥ä½™éœï¼Œå´ä¸æ›¾æƒ³å¥¹èµ°è¿›äº†æˆ‘çš„ç”Ÿæ´»ï¼Œé‚£æ—¥ï¼Œåœ¨ç›—å–åº·ç‹åºœçå®å¤œæ˜ç åï¼Œä¸ºèº²é¿è¿½æ•ï¼Œæˆ‘çºµé©¬é€ƒå‡ºåŸå¤–ï¼Œå´å› å‹’é©¬ä¸åŠï¼Œæ— æ„ä¸­è½»å¾®å¸¦èµ·è·¯è¾¹ä¸€å¥³å­çš„è£™è¾¹ï¼Œçœ‹å®˜å…µå¹¶æœªè¿½æ¥ï¼Œæˆ‘ä¸‹é©¬å‘å¥³å­é“æ­‰ï¼Œå´ä¸æƒ³åªæ­¤ä¸€çœ¼ï¼Œä¾¿æ˜¯ä¸€ç”Ÿï¼Œè‡ªè®¤è¿™ä¸–é—´æ²¡æœ‰ç›—ä¸åˆ°çš„ä¸œè¥¿çš„æˆ‘ï¼Œå´å¼€å§‹æ‹…å¿ƒç›—ä¸åˆ°å¥¹çš„å¿ƒï¼Œç„¶è€Œè‡ªå·±çš„å¿ƒå´å·²è¢«å¥¹å¸¦èµ°ï¼Œå› ä¸ºè¿™ä¸€çœ¼ï¼Œæˆ‘å¿½ç„¶æƒ³ä¸å†ä¸ºç›—ï¼Œå¨¶å…¶ä¸ºå¦»ã€‚è€å¤©å¾…æˆ‘ä¸è–„ï¼Œæˆ‘ç›—å¾—äº†å¥¹çš„å¿ƒï¼Œç„¶åæˆ‘æ¸¡è¿‡äº†æ­¤ç”Ÿæœ€å¿«ä¹çš„ä¸‰å¹´ï¼Œæˆ‘é™ªå¥¹åƒå··å­é‡Œçš„é‚£å®¶æ±¤é¢ã€è°ˆç¬‘ä¸­çª—å¤–ç™½é›ªçº·é£ï¼Œä¸æƒœç”¨å¤œæ˜ç åšå¼¹ç å¼¹å±±é›€â€¦â€¦å…¬å…ƒ1126å¹´ï¼Œæˆ‘å†³å®šå¨¶å¥¹ï¼Œå¬é—»å—äº¬ç‹åºœä¸­æœ‰ä¸€ç‰ç°ªï¼Œå¾—ä¹‹èµ äºˆå¿ƒçˆ±ä¹‹äººï¼Œå¯ä¸å…¶ç”Ÿç”Ÿä¸–ä¸–æ°¸ä¸åˆ†ç¦»ï¼Œæˆ‘å†³å®šå°†å®ƒå·æ¥é€ç»™å¥¹ï¼Œå’Œå¥¹è¯´å¥½è¿‡äº›æ—¥å­æˆ‘å°±ä¼šå›æ¥è¿å¨¶å¥¹ï¼Œä¹‹åå°±è¸ä¸Šäº†å»å—äº¬çš„è·¯ï¼Œåœ¨æˆ‘ç›—å¾—ç‰ç°ªè¿”é€”ä¸­ï¼Œå¬é—»é‡‘å†›æ”»é™·æ±´æ¢ï¼Œä¸€è·¯çƒ§æ€æŠ¢æ ï¼Œæ°‘ä¸èŠç”Ÿï¼Œæˆ‘æ…Œå¼ çš„å›åˆ°æ±´æ¢ï¼Œè·¯ä¸Šä¸åœçš„å®‰æ…°è‡ªå·±å¥¹ä¸€å®šæ²¡äº‹ï¼Œå´ä¸å¾—ä¸æ¥å—å¥¹å·²è¿‡ä¸–çš„ç°å®ï¼Œå¯èƒ½è´¼å°±æ˜¯è´¼å§ï¼Œä¸è®ºæˆ‘æ˜¯å¦åŠ«å¯Œæµè´«ï¼ŒæŠ¥åº”ç»ˆç©¶è¿˜æ˜¯æ¥äº†ï¼Œæˆ‘å¤±å»äº†æœ€å¿ƒçˆ±çš„äººï¼Œè‡ªæ­¤æˆ‘å¼ƒç›—ä»å†›ï¼Œå¸¦ç€å¯¹å¥¹çš„ç•™æ‹ï¼Œå°†ä¸€è…”æ¨æ„å…¨éƒ¨æ”¾åœ¨äº†é‡‘å†›èº«ä¸Šï¼Œå°†å£«ä»¬éƒ½è¯´æˆ‘åœ¨æˆ˜åœºå‹‡çŒ›å¼‚å¸¸ï¼Œå´ä¸çŸ¥æˆ‘å¿ƒä¸­æ»¡æ˜¯ä¸ºå¥¹æŠ¥ä»‡çš„æ€’æ„ä¸æ²¡æœ‰ç•™åœ¨å¥¹èº«è¾¹çš„æ‚”æ„ã€‚æœ€ç»ˆé‡‘å†›è´¥é€€ï¼Œæˆ‘å°„æ€äº†å®Œé¢œå…‹å›¾ï¼Œä¹Ÿå› æ­¤è¢«å°ä¸ºæŠ¤å›½å¤§å°†å†›ï¼Œæœå ‚ä¹‹ä¸Šï¼Œæˆ‘æ¨å´äº†èµèµï¼Œè¾æ‰äº†å®˜èŒï¼Œæ¥åˆ°äº†é‚£ä¸ªæœ‰ç€å¥¹çˆ±åƒçš„æ±¤é¢çš„å··å­ï¼Œå¼€äº†è¿™ä¸€ç¬‘è½©ï¼Œæˆä¸ºäº†ä¸€ä¸ªè®²å°½æ•…äº‹ï¼Œå´èµ°ä¸å‡ºè‡ªå·±æ•…äº‹çš„è¯´ä¹¦äººã€‚â€</p>
<p>â€œâ€¦â€¦åœ¨å¤§å°†å†›è¾å®˜ä¹‹åï¼Œä¾¿æ— äººçŸ¥æ™“å…¶å»å¤„ï¼Œå¾’ç•™è¿™ä¹ˆä¸€ä¸ªæ•…äº‹ï¼Œæˆ‘å¶ç„¶é—»å¾—ï¼Œè®²ä¸è¯¸ä½å¬ã€‚ä»Šæ—¥å°±è®²åˆ°è¿™é‡Œï¼Œå¤šè°¢è¯¸ä½æ§åœºã€‚â€ä¸€å£°é†’æœ¨ï¼Œä¼—äººè¿˜æœªä»å¤§ç›—çš„æ•…äº‹ä¸­å›è¿‡ç¥æ¥ï¼Œå´å‘ç°è¯´ä¹¦äººå·²ç„¶è½¬è¿›åå ‚ï¼Œä¼—äººèµ·èº«å››æ•£ï¼Œè¯´ä¹¦äººè½¬è¿›åå ‚å·²æ˜¯æ³ªæµæ»¡é¢ï¼Œçœ‹ç€åå ‚é™¢ä¸­çš„æ‡æ·æ ‘ï¼Œæ ‘ä¸ŠæŒ‚ç€é‚£åªæœªé€å‡ºçš„ç‰ç°ªâ€¦â€¦</p>
<p>ä½œè€…ï¼šä¸€ä¸ªäººçš„å…µè’é¦¬ä¹±<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/7aa6bfbb0df1" target="_blank" rel="noopener">https://www.jianshu.com/p/7aa6bfbb0df1</a><br>ä¾†æºï¼šç®€ä¹¦</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/09/16/docker-container-port/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/16/docker-container-port/" itemprop="url">
                  Dockerå®¹å™¨åŠ¨æ€æ·»åŠ ç«¯å£
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-09-16 23:40:33" itemprop="dateCreated datePublished" datetime="2018-09-16T23:40:33+08:00">2018-09-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-10-27 14:42:56" itemprop="dateModified" datetime="2018-10-27T14:42:56+08:00">2018-10-27</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>çªç„¶é‡åˆ°ä¸€ä¸ªé—®é¢˜æ€ä¹ˆç»™ä¸€ä¸ªå·²ç»åœ¨è¿è¡Œçš„dockerå®¹å™¨æ·»åŠ ç«¯å£ï¼Œæ‰¾äº†æ‰¾èµ„æ–™ï¼Œè®°ä¸ªç¬”è®°ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://blog.csdn.net/zuoshenglo/article/details/78402772" target="_blank" rel="noopener">æ€ä¹ˆç»™è¿è¡Œä¸­çš„dockerå®¹å™¨æ·»åŠ æ–°çš„ç«¯å£</a></li>
<li><a href="https://blog.csdn.net/wesleyflagon/article/details/78961990" target="_blank" rel="noopener">ä¿®æ”¹dockerå®¹å™¨ç«¯å£æ˜ å°„çš„æ–¹æ³•</a></li>
<li><a href="https://blog.csdn.net/xfks55/article/details/50148389" target="_blank" rel="noopener">iptableè§„åˆ™æŸ¥çœ‹ï¼Œæ·»åŠ ï¼Œåˆ é™¤å’Œä¿®æ”¹</a></li>
</ul>
<h2 id="æ–¹æ³•1-ä¿®æ”¹iptablesç«¯å£æ˜ å°„"><a href="#æ–¹æ³•1-ä¿®æ”¹iptablesç«¯å£æ˜ å°„" class="headerlink" title="æ–¹æ³•1 ä¿®æ”¹iptablesç«¯å£æ˜ å°„"></a>æ–¹æ³•1 ä¿®æ”¹iptablesç«¯å£æ˜ å°„</h2><blockquote>
<p>dockerçš„ç«¯å£æ˜ å°„å¹¶ä¸æ˜¯åœ¨dockeræŠ€æœ¯ä¸­å®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡å®¿ä¸»æœºçš„iptablesæ¥å®ç°ã€‚é€šè¿‡æ§åˆ¶ç½‘æ¡¥æ¥åšç«¯å£æ˜ å°„ï¼Œç±»ä¼¼è·¯ç”±å™¨ä¸­è®¾ç½®è·¯ç”±ç«¯å£æ˜ å°„ã€‚</p>
</blockquote>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„8080ç«¯å£ï¼Œå…ˆæŸ¥çœ‹iptablesåˆ°åº•è®¾ç½®äº†ä»€ä¹ˆè§„åˆ™ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -vnL</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ç»“æœä¸­æœ‰ä¸€æ¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Chain DOCKER</span><br><span class="line">target     prot opt source               destination</span><br><span class="line">RETURN     all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">DNAT       tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:8080 to:172.17.0.3:80</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°dockeråˆ›å»ºäº†ä¸€ä¸ªåä¸ºDOKCERçš„è‡ªå®šä¹‰çš„é“¾æ¡Chainã€‚è€Œæˆ‘å¼€æ”¾80ç«¯å£çš„å®¹å™¨çš„ipæ˜¯172.17.0.3</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡inspectå‘½ä»¤æŸ¥çœ‹å®¹å™¨ip<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect containerId |grep IPAddress</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬æƒ³å†å¢åŠ ä¸€ä¸ªç«¯å£æ˜ å°„ï¼Œæ¯”å¦‚<code>8081-&gt;81</code>ï¼Œå°±åœ¨è¿™ä¸ªé“¾æ¡æ˜¯å†åŠ ä¸€æ¡è§„åˆ™ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -A  DOCKER -p tcp --dport 8081 -j DNAT --to-destination 172.17.0.3:81</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœåŠ é”™äº†æˆ–è€…æƒ³ä¿®æ”¹ï¼š</p>
<p>å…ˆæ˜¾ç¤ºè¡Œå·æŸ¥çœ‹<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -vnL DOCKER</span><br></pre></td></tr></table></figure></p>
<p>åˆ é™¤è§„åˆ™3<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -D DOCKER 3</span><br></pre></td></tr></table></figure></p>
<h2 id="æ–¹æ³•2-ä¿®æ”¹å®¹å™¨é…ç½®æ–‡ä»¶"><a href="#æ–¹æ³•2-ä¿®æ”¹å®¹å™¨é…ç½®æ–‡ä»¶" class="headerlink" title="æ–¹æ³•2 ä¿®æ”¹å®¹å™¨é…ç½®æ–‡ä»¶"></a>æ–¹æ³•2 ä¿®æ”¹å®¹å™¨é…ç½®æ–‡ä»¶</h2><p>å®¹å™¨çš„é…ç½®æ–‡ä»¶<code>/var/lib/docker/containers/[containerId]</code>ç›®å½•ä¸‹ï¼Œ<code>hostconfig.json</code>å’Œ<code>config.v2.json</code><br>ä¿®æ”¹å¥½ä¹‹åï¼Œé‡å¯å®¹å™¨æœåŠ¡ã€‚</p>
<h2 id="æ–¹æ³•3-æŠŠè¿è¡Œä¸­çš„å®¹å™¨ç”Ÿæˆæ–°çš„é•œåƒï¼Œç„¶åè¿è¡Œæ–°çš„é•œåƒ"><a href="#æ–¹æ³•3-æŠŠè¿è¡Œä¸­çš„å®¹å™¨ç”Ÿæˆæ–°çš„é•œåƒï¼Œç„¶åè¿è¡Œæ–°çš„é•œåƒ" class="headerlink" title="æ–¹æ³•3 æŠŠè¿è¡Œä¸­çš„å®¹å™¨ç”Ÿæˆæ–°çš„é•œåƒï¼Œç„¶åè¿è¡Œæ–°çš„é•œåƒ"></a>æ–¹æ³•3 æŠŠè¿è¡Œä¸­çš„å®¹å™¨ç”Ÿæˆæ–°çš„é•œåƒï¼Œç„¶åè¿è¡Œæ–°çš„é•œåƒ</h2><ol>
<li><p>æäº¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ä¸ºé•œåƒ</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit containerid heropoo/example</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œ<code>heropoo/example</code>é•œåƒå¹¶æ·»åŠ 8080æ˜ å°„å®¹å™¨80ç«¯å£</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8000:80  heropoo/example /bin/sh</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>è¯•è¯•å§~ğŸ˜</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/09/15/bing-site-search/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/15/bing-site-search/" itemprop="url">
                  ä½¿ç”¨Bingæœç´¢å¼•æ“åšç«™å†…æœç´¢
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-09-15 20:14:05" itemprop="dateCreated datePublished" datetime="2018-09-15T20:14:05+08:00">2018-09-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-09-16 20:31:06" itemprop="dateModified" datetime="2018-09-16T20:31:06+08:00">2018-09-16</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æœç´¢å¼•æ“/" itemprop="url" rel="index"><span itemprop="name">æœç´¢å¼•æ“</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å› ä¸ºè‡ªå·±çš„åšå®¢ç™¾åº¦æœªæ”¶å½•â•®(â•¯-â•°)â•­ï¼Œæœ¬æ¥ä¹‹å‰ç”¨çš„è°·æ­Œï¼Œä½†æ˜¯è°·æ­Œæ¯•ç«Ÿç¿»å¢™æ‰èƒ½ç”¨ã€‚å†³å®šè¿˜æ˜¯æ¢å¾®è½¯çš„Bingæœç´¢å¼•æ“æ¥åšç«™å†…æœç´¢å§ã€‚</p>
<p>å¤§æ¦‚æ˜¯è¿™æ ·çš„æ•ˆæœ<br><img src="/assets/images/20180916201818.png" alt="example-pic"></p>
<p>è§‚å¯Ÿäº†ä¸‹ï¼ŒBingæŒ‡å®šç«™ç‚¹æœç´¢å¾ˆç®€å•ï¼Œæ¯”å¦‚æœç´¢æ¡†è¾“å…¥å…³é”®å­—<code>git site:www.ioio.pw</code>æäº¤ä¹‹åçš„urlæ˜¯<code>https://bing.com/search?q=git+site%3Awww.ioio.pw</code></p>
<p>æ‰€ä»¥å¼€å§‹å†™ä¸ªç®€å•çš„formè¡¨å•å°±å¥½äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>bing search<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Bing Search<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"https://bing.com/search"</span> <span class="attr">id</span>=<span class="string">"searchForm"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"q"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"site"</span> <span class="attr">value</span>=<span class="string">"www.ioio.pw"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Search"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">	<span class="keyword">var</span> searchForm = <span class="built_in">document</span>.getElementById(<span class="string">'searchForm'</span>);</span></span><br><span class="line"><span class="javascript">	searchForm.onsubmit = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> url = <span class="keyword">this</span>.action;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> q = <span class="keyword">this</span>.children[<span class="string">'q'</span>].value;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> site = <span class="keyword">this</span>.children[<span class="string">'site'</span>].value;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> url = url + <span class="string">'?q='</span>+q+<span class="string">' site:'</span>+ site;</span></span><br><span class="line"><span class="javascript">		<span class="built_in">window</span>.open(url);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">	&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å¥½äº†ï¼Œæå®š~</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/08/02/composer-mirrors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/02/composer-mirrors/" itemprop="url">
                  Composerå®˜æ–¹é•œåƒå¤ªæ…¢æˆ–è€…è¢«å¢™æ— æ³•ä½¿ç”¨æ—¶çš„å‡ ç§è§£å†³æ–¹æ¡ˆ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-08-02 12:11:06" itemprop="dateCreated datePublished" datetime="2018-08-02T12:11:06+08:00">2018-08-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-10-16 18:55:36" itemprop="dateModified" datetime="2018-10-16T18:55:36+08:00">2018-10-16</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Composer/" itemprop="url" rel="index"><span itemprop="name">Composer</span></a></span>

                
                
                  ï¼Œ
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Composer/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Composerå®˜æ–¹é•œåƒå¤ªæ…¢æˆ–è€…è¢«å¢™æ— æ³•ä½¿ç”¨æ—¶çš„å‡ ç§è§£å†³æ–¹æ¡ˆ</p>
<h3 id="ä½¿ç”¨ä»£ç†"><a href="#ä½¿ç”¨ä»£ç†" class="headerlink" title="ä½¿ç”¨ä»£ç†"></a>ä½¿ç”¨ä»£ç†</h3><p>è¢«å¢™ä½¿ç”¨å›½å¤–ä»£ç†ä¸Šç½‘ï¼Œæ€»æ˜¯ä¸€ç§è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚åŠ å…¥ä½ ä½¿ç”¨shadowsocksä»£ç†ï¼Œå¼€å¯ä¹‹åé»˜è®¤çš„æœ¬åœ°ç«¯å£æ˜¯1080ã€‚åªè¦è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡<code>http_proxy</code>å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<p>Mac OS / Linux ç»ˆç«¯<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=127.0.0.1:1080</span><br></pre></td></tr></table></figure></p>
<p>windows cmdå‘½ä»¤è¡Œ<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> http_proxy=<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">1080</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°±å¯ä»¥äº†ï¼Œæ„‰å¿«çš„ä¸‹è½½å„ç§åŒ…å§~</p>
<h3 id="ä½¿ç”¨å›½å†…é•œåƒåœ°å€"><a href="#ä½¿ç”¨å›½å†…é•œåƒåœ°å€" class="headerlink" title="ä½¿ç”¨å›½å†…é•œåƒåœ°å€"></a>ä½¿ç”¨å›½å†…é•œåƒåœ°å€</h3><blockquote>
<ul>
<li>cnpkgæä¾›çš„é•œåƒåœ°å€ï¼š <a href="https://php.cnpkg.org" target="_blank" rel="noopener">https://php.cnpkg.org</a></li>
<li>LaravelChinaç¤¾åŒºæä¾›çš„é•œåƒåœ°å€ï¼š <a href="https://packagist.laravel-china.org" target="_blank" rel="noopener">https://packagist.laravel-china.org</a></li>
<li>Composerä¸­æ–‡ç½‘æä¾›çš„é•œåƒåœ°å€ï¼š <a href="https://packagist.phpcomposer.com" target="_blank" rel="noopener">https://packagist.phpcomposer.com</a></li>
</ul>
</blockquote>
<p>é•œåƒä½¿ç”¨æ–¹æ³•:</p>
<p>å…¨å±€é…ç½®ï¼ˆæ¨èï¼‰:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer config -g repo.packagist composer https://php.cnpkg.org</span><br></pre></td></tr></table></figure></p>
<p>å•ç‹¬é¡¹ç›®ä½¿ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer config repo.packagist composer https://php.cnpkg.org</span><br></pre></td></tr></table></figure></p>
<p>å–æ¶ˆé•œåƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer config -g --unset repos.packagist</span><br></pre></td></tr></table></figure></p>
<p>â€”- æœ€åæ›´æ–°æ—¶é—´ï¼š 2018-10-16 18:55:18</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/05/01/git-webhook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/01/git-webhook/" itemprop="url">
                  ä½¿ç”¨PHPå†™Gitçš„è‡ªåŠ¨éƒ¨ç½²webhookè„šæœ¬
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-05-01 10:16:43" itemprop="dateCreated datePublished" datetime="2018-05-01T10:16:43+08:00">2018-05-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-07-18 11:18:33" itemprop="dateModified" datetime="2018-07-18T11:18:33+08:00">2018-07-18</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a></span>

                
                
                  ï¼Œ
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Git/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ç°åœ¨å¼€å‘é¡¹ç›®å¤§å¤šä½¿ç”¨gitä½œä¸ºç‰ˆæœ¬æ§åˆ¶å™¨ï¼Œè€Œä¸”ç°åœ¨å¤§å¤šæ•°çš„ä»£ç æ‰˜ç®¡å¹³å°éƒ½æ”¯æŒè‡ªå®šä¹‰webhookè„šæœ¬ã€‚æ­£å¥½åˆ©ç”¨è¿™ä¸ªè„šæœ¬ï¼Œç»“åˆgitçš„workflowï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„åšåˆ°é¡¹ç›®ä»£ç çš„è‡ªåŠ¨å‘å¸ƒéƒ¨ç½²ã€‚</p>
<h3 id="æœ€ç®€å•çš„æµç¨‹"><a href="#æœ€ç®€å•çš„æµç¨‹" class="headerlink" title="æœ€ç®€å•çš„æµç¨‹"></a>æœ€ç®€å•çš„æµç¨‹</h3><p>æ¯”å¦‚ä½ çš„é¡¹ç›®æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªæ˜¯ä»£ç å·²ç»ç»è¿‡æµ‹è¯•å¯ç”¨äºéƒ¨ç½²åˆ°æœåŠ¡å™¨çš„masteråˆ†æ”¯ï¼Œä¸€ä¸ªç”¨äºå¼€å‘çš„devåˆ†æ”¯ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸Šçº¿çš„è¿‡ç¨‹å°±æ˜¯merge devçš„ä»£ç åˆ°masteråˆ†æ”¯ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªä»£ç pushè§¦å‘çš„webhookã€‚è¿™ä¸ªwebhookè„šæœ¬çš„ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯<code>git pull origin master</code>ã€‚</p>
<h3 id="æœ€ç®€å•çš„å®ç°"><a href="#æœ€ç®€å•çš„å®ç°" class="headerlink" title="æœ€ç®€å•çš„å®ç°"></a>æœ€ç®€å•çš„å®ç°</h3><ul>
<li>ç¼–å†™<code>webhook.php</code></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// todo åœ¨æ­¤å¯ä»¥å†™æ ¡éªŒæƒé™å¯†ç ä¹‹ç±»çš„ä»£ç </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$path = dirname(<span class="keyword">__DIR__</span>);</span><br><span class="line">$log_file = $path.<span class="string">'/runtime/logs/webhook-pull-error-output.log'</span>;	<span class="comment">//é”™è¯¯æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">$descriptorspec = <span class="keyword">array</span>(</span><br><span class="line">    <span class="number">0</span> =&gt; <span class="keyword">array</span>(<span class="string">"pipe"</span>, <span class="string">"r"</span>),  <span class="comment">// æ ‡å‡†è¾“å…¥ï¼Œå­è¿›ç¨‹ä»æ­¤ç®¡é“ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">    <span class="number">1</span> =&gt; <span class="keyword">array</span>(<span class="string">"pipe"</span>, <span class="string">"w"</span>),  <span class="comment">// æ ‡å‡†è¾“å‡ºï¼Œå­è¿›ç¨‹å‘æ­¤ç®¡é“ä¸­å†™å…¥æ•°æ®</span></span><br><span class="line">    <span class="number">2</span> =&gt; <span class="keyword">array</span>(<span class="string">"file"</span>, $log_file, <span class="string">"a"</span>) <span class="comment">// æ ‡å‡†é”™è¯¯ï¼Œå†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">$cwd = $path;</span><br><span class="line">$env = <span class="keyword">array</span>(<span class="string">'PATH'</span> =&gt; $_SERVER[<span class="string">'PATH'</span>]);</span><br><span class="line"></span><br><span class="line">$process = proc_open(<span class="string">'sudo git pull origin master'</span>, $descriptorspec, $pipes, $cwd, $env);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</span><br><span class="line"><span class="keyword">if</span> (is_resource($process)) &#123;</span><br><span class="line">    <span class="comment">// $pipes ç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</span></span><br><span class="line">    <span class="comment">// 0 =&gt; å¯ä»¥å‘å­è¿›ç¨‹æ ‡å‡†è¾“å…¥å†™å…¥çš„å¥æŸ„</span></span><br><span class="line">    <span class="comment">// 1 =&gt; å¯ä»¥ä»å­è¿›ç¨‹æ ‡å‡†è¾“å‡ºè¯»å–çš„å¥æŸ„</span></span><br><span class="line">    <span class="comment">// é”™è¯¯è¾“å‡ºå°†è¢«è¿½åŠ åˆ°æ–‡ä»¶ /tmp/error-output.txt</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> stream_get_contents($pipes[<span class="number">1</span>]);</span><br><span class="line">    fclose($pipes[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ‡è®°ï¼šåœ¨è°ƒç”¨ proc_close ä¹‹å‰å…³é—­æ‰€æœ‰çš„ç®¡é“ä»¥é¿å…æ­»é”ã€‚</span></span><br><span class="line">    $return_value = proc_close($process);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> PHP_EOL.<span class="string">"command returned $return_value\n"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ·»åŠ phpè„šæœ¬çš„æ‰§è¡Œç”¨æˆ·sudoersä¸­</li>
</ul>
<p>æ¯”å¦‚ä½ ä½¿ç”¨nginx+php-fpmçš„æœåŠ¡å™¨æ¶æ„ï¼Œä½ çš„php-fpmçš„ç”¨æˆ·æ˜¯www-data<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">visudo</span><br><span class="line">--------------------------------</span><br><span class="line">...</span><br><span class="line"><span class="comment">#Defaults   !visiblepw   #æ³¨é‡Šæ‰è¿™å¥ è¿™å¥æ˜¯é™åˆ¶sudoåªèƒ½åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„</span></span><br><span class="line">www-data ALL=(ALL:ALL) NOPASSWD: /usr/bin/git</span><br></pre></td></tr></table></figure></p>
<ul>
<li>pushä»£ç åˆ°masteråˆ†æ”¯æµ‹è¯•ä¸‹å§~ ç™»é™†æœåŠ¡å™¨çœ‹çœ‹ä»£ç æ˜¯ä¸æ˜¯å·²ç»åŒæ­¥å¥½äº†ã€€</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://metmoon.com/2018/03/31/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Heropoo">
      <meta itemprop="description" content="æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ»¡æ±Ÿé£é›ª">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/31/git/" itemprop="url">
                  Gitçš„ä¸€äº›åŸºæœ¬æ“ä½œã€æŒç»­æ›´æ–°ã€‘
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-31 21:47:05" itemprop="dateCreated datePublished" datetime="2018-03-31T21:47:05+08:00">2018-03-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-11-18 18:03:03" itemprop="dateModified" datetime="2018-11-18T18:03:03+08:00">2018-11-18</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ç»å¸¸ç”¨gitï¼Œä½†å¥½å¤šå‘½ä»¤æ€»æ˜¯è®°ä¸ä½ï¼Œæ¯æ¬¡éƒ½ç™¾åº¦ã€‚ç°åœ¨æ•´ç†ä¸‹åšä¸ªç¬”è®°å§ã€‚</p>
<h3 id="åˆ†æ”¯æ“ä½œ"><a href="#åˆ†æ”¯æ“ä½œ" class="headerlink" title="åˆ†æ”¯æ“ä½œ"></a>åˆ†æ”¯æ“ä½œ</h3><ul>
<li><p>æŸ¥çœ‹åˆ†æ”¯</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch  <span class="comment">#åªæ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch -a <span class="comment">#æ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºåˆ†æ”¯</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b branch_name</span><br><span class="line"><span class="comment">#å¦‚æœæœ‰ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯remotes/origin/branch_name,é‚£ä¹ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤å°†ä¼šåˆ›å»ºæ–°çš„åä¸º`branch_name`æœ¬åœ°åˆ†æ”¯å¹¶ä¸”è·Ÿè¸ªåŒåçš„è¿œç¨‹åˆ†æ”¯remotes/origin/branch_name</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨é€è¿œç¨‹åˆ†æ”¯</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin branch_name</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤åˆ†æ”¯</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch -d branch_name</span><br><span class="line"><span class="comment"># åˆ é™¤æœ¬åœ°åˆ†æ”¯åå¹¶åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git push --delete origin branch_name</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="tag-æ ‡ç­¾æ“ä½œ"><a href="#tag-æ ‡ç­¾æ“ä½œ" class="headerlink" title="tag æ ‡ç­¾æ“ä½œ"></a>tag æ ‡ç­¾æ“ä½œ</h3><ul>
<li><p>æŸ¥çœ‹tagåˆ—è¡¨</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å¢tag</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag tag_name <span class="comment"># æ¯”å¦‚v1.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨é€æœ¬åœ°æŒ‡å®štagåˆ°è¿œç¨‹</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin tag_name</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨é€å…¨éƒ¨æœ¬åœ°tagåˆ°è¿œç¨‹</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --tags</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤tag</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag -d </span><br><span class="line"><span class="comment"># åˆ é™¤tagåå¹¶åˆ é™¤è¿œç¨‹tag</span></span><br><span class="line">git push --delete tag tag_name</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="githubä¸­forkçš„é¡¹ç›®ä¸åŸä½œè€…åŒæ­¥"><a href="#githubä¸­forkçš„é¡¹ç›®ä¸åŸä½œè€…åŒæ­¥" class="headerlink" title="githubä¸­forkçš„é¡¹ç›®ä¸åŸä½œè€…åŒæ­¥"></a>githubä¸­forkçš„é¡¹ç›®ä¸åŸä½œè€…åŒæ­¥</h3><p>å‡å¦‚ä¸€ä¸ªé¡¹ç›®<code>Evil-S0ul/write-doc</code>åœ°å€: <a href="https://github.com/Evil-S0ul/write-doc" target="_blank" rel="noopener">https://github.com/Evil-S0ul/write-doc</a></p>
<p>æˆ‘forkä¹‹åçš„é¡¹ç›®æ˜¯<code>heropoo/write-doc</code>åœ°å€: <a href="https://github.com/heropoo/write-doc" target="_blank" rel="noopener">https://github.com/heropoo/write-doc</a></p>
<p>æ¥ä¸‹æ¥å¼€å§‹æ“ä½œï¼š</p>
<ol>
<li><p>åˆ‡æ¢åˆ°æˆ‘forkçš„é¡¹ç›®ç›®å½•é‡Œï¼Œç„¶åå¢åŠ æºä»“åº“åœ°å€åˆ°ä½ é¡¹ç›®çš„è¿œç¨‹åˆ†æ”¯ä¸­</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> write-doc</span><br><span class="line">git remote add Evil-S0ul https://github.com/Evil-S0ul/write-doc</span><br></pre></td></tr></table></figure>
</li>
<li><p>fetchåˆšæ·»åŠ çš„æºåˆ†æ”¯åˆ°æœ¬åœ°</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch Evil-S0ul</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆå¹¶ä¸¤ä¸ªç‰ˆæœ¬çš„ä»£ç </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge Evil-S0ul/master</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ€åæŠŠåˆå¹¶åçš„ä»£ç pushåˆ°ä½ çš„Githubé¡¹ç›®ä¸Šå»å°±okå•¦</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="æ£€å‡ºè¿œç¨‹çš„æŸä¸ªåˆ†æ”¯æˆ–è€…tag"><a href="#æ£€å‡ºè¿œç¨‹çš„æŸä¸ªåˆ†æ”¯æˆ–è€…tag" class="headerlink" title="æ£€å‡ºè¿œç¨‹çš„æŸä¸ªåˆ†æ”¯æˆ–è€…tag"></a>æ£€å‡ºè¿œç¨‹çš„æŸä¸ªåˆ†æ”¯æˆ–è€…tag</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git fetch</span><br><span class="line">git checkout branch_name</span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line">git checkout tag_name</span><br></pre></td></tr></table></figure>
<h3 id="åŒæ­¥ä¸”mergeå…¶ä»–è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯"><a href="#åŒæ­¥ä¸”mergeå…¶ä»–è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯" class="headerlink" title="åŒæ­¥ä¸”mergeå…¶ä»–è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯"></a>åŒæ­¥ä¸”mergeå…¶ä»–è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin other_branch_name</span><br></pre></td></tr></table></figure>
<h3 id="Gitæ— æ³•pullä»“åº“refusing-to-merge-unrelated-histories"><a href="#Gitæ— æ³•pullä»“åº“refusing-to-merge-unrelated-histories" class="headerlink" title="Gitæ— æ³•pullä»“åº“refusing to merge unrelated histories"></a>Gitæ— æ³•pullä»“åº“refusing to merge unrelated histories</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬çš„æœ¬åœ°ä»“åº“æ·»åŠ äº†ä¸€ä¸ªè¿œç¨‹ä»“åº“åœ°å€ï¼Œpullä»£ç æ—¶ä¼šæŠ¥<code>refusing to merge unrelated histories</code>çš„é”™ã€‚è§£å†³æ–¹æ³•æ˜¯åŠ ä¸€ä¸ªå‚æ•°<code>--allow-unrelated-histories</code>ã€‚</p>
<p>å‡å¦‚æˆ‘ä»¬çš„åˆ†æ”¯æ˜¯master<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master --allow-unrelated-histories</span><br></pre></td></tr></table></figure></p>
<p>æœ€åæ›´æ–°ï¼š 2018-11-18 17:59:06</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Heropoo</p>
              <p class="site-description motion-element" itemprop="description">æ»¡æ±Ÿé£é›ªï¼ŒHeropooçš„ä¸ªäººåšå®¢ã€‚</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">27</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">33</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Heropoo</span>

  

  
</div>




  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.2"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
